platform: linux

image_resource:
  type: docker-image
  source:
    repository: maven
    tag: latest
    
inputs:
  - name: branch-master
  - name: mvn-output
outputs:
  - name: mvn-output
  
##run:
#  path: "mvn"
#   args: ["-f", "branch-master/AppDemo/pom.xml", "test"]

#run:
#  path: /bin/bash
#  args: ["set -e -x mvn -f branch-master/AppDemo/pom.xml test cp branch-master/AppDemo/target/ mvn-output/"]

run:
  path: sh
  args:
  - -eux
  - |
    mkdir mvn-output
    set -e -x mvn -f branch-master/AppDemo/pom.xml test
    cp branch-master/AppDemo/target/ mvn-output/
    
    